<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Health Risk AI</title>
  <link rel="shortcut icon" href="/app/static/images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/app/static/app.css" />
  <!-- Automatic URL fragment removal -->
  <script>
    (function() {
      // Function to remove URL fragment (hash) without reloading the page
      function removeHash() {
        if (window.location.hash && window.location.hash.length > 0) {
          // Build clean URL without hash
          const cleanUrl = window.location.pathname + window.location.search;
          // Replace current URL without reloading the page
          window.history.replaceState(null, '', cleanUrl);
        }
      }
      
      // Remove hash immediately on page load
      // This prevents fragments from appearing in the URL bar
      // Fragments are not sent to the server, so cleanup must happen client-side
      removeHash();
      
      // Also remove hash if it appears during SPA navigation (hashchange event)
      // This ensures hash is removed even if it's added programmatically
      window.addEventListener('hashchange', function() {
        removeHash();
      });
    })();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/navigo@8.11.1/lib/navigo.min.js" crossorigin="anonymous"></script>
  <!-- Бібліотеки для генерації звітів -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx-js-style@1.2.0/dist/xlsx.min.js" crossorigin="anonymous"></script>
</head>
<body class="theme-light preload">
  <div class="layout">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar__header">
        <div class="sidebar__logo-row">
          <div class="sidebar__logo" title="Автоматизована система оцінки та прогнозування ризиків для здоров'я з використанням методів штучного інтелекту">
            <span class="icon" data-lucide="activity"></span>
            <span class="sidebar__logo-text">Health Risk AI</span>
          </div>
          <button type="button" class="sidebar__toggle" id="sidebar-toggle" aria-label="Згорнути/розгорнути бокову панель" title="Згорнути/розгорнути бокову панель">
            <span class="icon" data-lucide="panel-left-close"></span>
          </button>
        </div>
        <div class="sidebar__controls">
          <div class="api-status" id="api-status" role="tooltip" aria-label="Статус підключення до API">
            <span class="status-dot" id="api-status-dot"></span>
            <div class="api-status__info">
              <span class="api-status__label">Статус API</span>
              <span class="api-status__text" id="api-status-text">Перевірка...</span>
            </div>
          </div>
          <button type="button" class="theme-toggle" aria-label="Перемикач теми">
            <span class="theme-icon" aria-hidden="true"></span>
          </button>
        </div>
      </div>
      <nav class="sidebar__nav" aria-label="Основна навігація">
        <button type="button" class="nav-item" data-section="page-profile" id="nav-profile" hidden>
          <span class="icon" data-lucide="user"></span>
          <span class="nav-item__text">Профіль</span>
        </button>
        <button type="button" class="nav-item nav-item--active" data-section="page-form">
          <span class="icon" data-lucide="clipboard-list"></span>
          <span class="nav-item__text">Форма прогнозування</span>
        </button>
        <button type="button" class="nav-item" data-section="page-history" id="nav-history" hidden>
          <span class="icon" data-lucide="history"></span>
          <span class="nav-item__text">Історія прогнозів</span>
        </button>
        <button type="button" class="nav-item" data-section="page-insights">
          <span class="icon" data-lucide="chart-bar"></span>
          <span class="nav-item__text">Діаграми</span>
        </button>
        <button type="button" class="nav-item" data-section="page-report" id="nav-report" hidden>
          <span class="icon" data-lucide="file-text"></span>
          <span class="nav-item__text">Звіти</span>
        </button>
        <button type="button" class="nav-item" data-section="page-assistant" id="nav-assistant">
          <span class="icon" data-lucide="messages-square"></span>
          <span class="nav-item__text">AI Асистент</span>
        </button>
        <button type="button" class="nav-item" data-section="page-chats" id="nav-chats" hidden>
          <span class="icon" data-lucide="message-circle"></span>
          <span class="nav-item__text">Чати</span>
          <span class="nav-item__badge" id="nav-chats-badge" hidden>0</span>
        </button>
      </nav>
    </aside>

    <div class="main-wrapper">
      <header class="app-header">
        <h1 id="page-title" class="app-header__title">Форма прогнозування</h1>
        <div class="app-header__user" id="user-panel">
          <div class="user-panel__guest" id="user-panel-guest" hidden></div>
          <div class="user-panel__auth" id="user-panel-auth" hidden>
            <button type="button" class="user-avatar-btn" id="user-avatar-btn" aria-label="Відкрити профіль">
              <span class="user-avatar" id="user-avatar" aria-hidden="true">?</span>
            </button>
            <button type="button" class="user-logout-btn" id="user-logout-btn" aria-label="Вийти з акаунту">
              <span class="icon" data-lucide="log-out" aria-hidden="true"></span>
            </button>
          </div>
        </div>
      </header>

    <main class="main">
      <!-- Overlay для приховування інтерфейсу під час генерації PDF -->
      <div class="pdf-export-overlay" id="pdf-export-overlay" aria-hidden="true">
        <div class="pdf-export-overlay__backdrop"></div>
        <div class="pdf-export-overlay__content">
          <span class="icon pdf-export-overlay__spinner" data-lucide="loader-2" aria-hidden="true"></span>
          <p>Формуємо PDF-звіт…</p>
        </div>
      </div>
      <section id="page-form" class="page page--active" aria-labelledby="page-title">
        <div class="page__grid">
          <section class="glass-card">
            <h2 class="glass-card__title">Параметри користувача</h2>
            <form id="predict-form" class="form" novalidate>
              <div class="form__field">
                <label for="target-select">
                  <span>Ціль прогнозування</span>
                  <button type="button" class="tooltip-trigger" data-tooltip="Оберіть ризик, який потрібно оцінити.">
                    <span class="icon" data-lucide="help-circle"></span>
                  </button>
                </label>
                <select id="target-select" required>
                  <option value="" disabled selected>Оберіть ціль</option>
                  <option value="diabetes_present">Ризик діабету</option>
                  <option value="obesity_present">Ризик ожиріння</option>
                </select>
              </div>
              <div class="form__field">
                <label for="model-select">
                  <span>Модель</span>
                  <button type="button" class="tooltip-trigger" data-tooltip-id="model-help">
                    <span class="icon" data-lucide="help-circle"></span>
                  </button>
                </label>
                <select id="model-select">
                  <option value="auto" selected>Найкраща модель (чемпіон)</option>
                  <option value="logreg">Логістична регресія</option>
                  <option value="random_forest">Random Forest</option>
                  <option value="xgb">XGBoost</option>
                  <option value="svm">SVM (опорні вектори)</option>
                  <option value="knn">K-Nearest Neighbors</option>
                  <option value="mlp">Нейромережа (MLP)</option>
                </select>
              </div>
              <div id="features-container" class="form__grid"></div>
              <div id="form-error" class="form__error" role="alert" hidden></div>
              <div class="form__actions">
                <button type="button" class="button button--ghost" id="demo-button">Заповнити випадкові дані</button>
                <button type="submit" class="button" id="submit-button">Розрахувати ризик</button>
              </div>
            </form>
          </section>

          <section class="glass-card" id="result-card" hidden>
            <div class="glass-card__header">
            <h2 class="glass-card__title">Результат</h2>
              <button type="button" class="button button--ghost button--small" id="generate-report-btn" aria-label="Згенерувати звіт" hidden>
                <span class="icon" data-lucide="file-text"></span>
                <span>Згенерувати звіт</span>
              </button>
            </div>
            <div class="result">
              <div class="result__row">
                <span class="result__label">Ймовірність</span>
                <span class="result__value" id="probability-value">—</span>
              </div>
              <div class="result__row">
                <span class="result__label">Рівень ризику</span>
                <span class="badge" id="risk-badge">—</span>
              </div>
              <div class="result__row result__row--bar">
                <div class="risk-bar">
                  <div class="risk-bar__fill" id="risk-bar-fill"></div>
                </div>
              </div>
              <div class="result__row">
                <span class="result__label">Модель</span>
                <span class="result__value" id="model-name">—</span>
              </div>
              <div class="result__row">
                <span class="result__label">Версія</span>
                <span class="result__value" id="model-version">—</span>
              </div>
              <p class="result__note" id="result-note"></p>
              <div class="chart">
                <h3>Топ-фактори</h3>
                <canvas id="factors-chart" width="400" height="320"></canvas>
                <p class="chart__empty" id="chart-empty" hidden>Для цього прогнозу фактори недоступні.</p>
              </div>
            </div>
          </section>
        </div>
      </section>

      <section id="page-insights" class="page" aria-labelledby="page-title">
        <p class="analytics-error" id="analytics-error" hidden></p>
        <div class="analytics-grid">
          <section class="glass-card analytics-card" id="card-profile-overview">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="user-check"></span>
              <span>Ваш профіль: ключові показники</span>
            </h2>
            <p class="analytics-card__subtitle">Порівняння останніх введених значень із рекомендованими межами для здорової людини.</p>
            <div class="chart-wrapper">
              <canvas id="profile-overview-chart" aria-label="Порівняння показників користувача" role="img"></canvas>
            </div>
            <p class="analytics-card__note" id="profile-overview-note">Кольори відображають, чи знаходиться показник у межах норми, попереджувальній або ризиковій зоні.</p>
            <p class="analytics-card__empty" id="profile-overview-empty" hidden>Щоб побачити персональні діаграми, спочатку розрахуйте ризики на сторінці «Форма прогнозування».</p>
          </section>

          <section class="glass-card analytics-card" id="card-risk-comparison">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="shield-check"></span>
              <span>Ризики за моделлю</span>
            </h2>
            <p class="analytics-card__subtitle">Порівняння обчислених ризиків діабету та ожиріння для вашого профілю.</p>
            <div class="chart-wrapper chart-wrapper--compact">
              <canvas id="model-risks-chart" aria-label="Порівняння ризиків діабету та ожиріння" role="img"></canvas>
            </div>
            <p class="analytics-card__note" id="model-risks-note">Ризики відображено у відсотках, де повна шкала відповідає 100%.</p>
            <p class="analytics-card__empty" id="model-risks-empty" hidden>Розрахуйте ризики діабету та ожиріння, щоб побачити порівняння.</p>
          </section>

          <section class="glass-card analytics-card" id="card-factors">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="sliders"></span>
              <span>Важливість факторів</span>
            </h2>
            <p class="analytics-card__subtitle">Показники, які найбільше вплинули на останній прогноз. Наведіть курсор, щоб прочитати пояснення.</p>
            <div class="chart-wrapper chart-wrapper--tall">
              <canvas id="insights-factors-chart" aria-label="Важливість факторів моделі" role="img"></canvas>
            </div>
            <p class="analytics-card__note">Позитивні значення свідчать про більший вплив фактору на підвищення ризику.</p>
            <p class="analytics-card__empty" id="insights-factors-empty" hidden>Топ фактори з’являться після першого успішного прогнозу.</p>
          </section>

          <section class="glass-card analytics-card" id="card-bmi">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="activity"></span>
              <span>Розподіл BMI у вибірці</span>
            </h2>
            <p class="analytics-card__subtitle">Показує, який відсоток людей з вибірки NHANES знаходиться у кожній категорії маси тіла.</p>
            <div class="chart-wrapper">
              <canvas id="dataset-bmi-chart" aria-label="Розподіл BMI у вибірці" role="img"></canvas>
            </div>
            <p class="analytics-card__note">Порівняйте свій ІМТ із типовими значеннями населення.</p>
          </section>

          <section class="glass-card analytics-card" id="card-bp">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="heart-pulse"></span>
              <span>Категорії артеріального тиску</span>
            </h2>
            <p class="analytics-card__subtitle">Частка людей з різними рівнями артеріального тиску у датасеті.</p>
            <div class="chart-wrapper chart-wrapper--compact">
              <canvas id="dataset-bp-chart" aria-label="Категорії артеріального тиску" role="img"></canvas>
            </div>
            <p class="analytics-card__note">«Норма» — до 120/80 мм рт. ст., «Гіпертонія 2 ступеня» — 140/90 мм рт. ст. і вище.</p>
          </section>

          <section class="glass-card analytics-card" id="card-chol">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="droplet"></span>
              <span>Рівні холестерину</span>
            </h2>
            <p class="analytics-card__subtitle">Розподіл загального холестерину у вибірці NHANES.</p>
            <div class="chart-wrapper">
              <canvas id="dataset-chol-chart" aria-label="Розподіл холестерину" role="img"></canvas>
            </div>
            <p class="analytics-card__note">Оптимальний рівень — нижче 200 мг/дл.</p>
          </section>

          <section class="glass-card analytics-card" id="card-diabetes-age">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="trending-up"></span>
              <span>Діабет за віковими групами</span>
            </h2>
            <p class="analytics-card__subtitle">Яка частка людей у кожній віковій групі має діабет (за самозвітом).</p>
            <div class="chart-wrapper">
              <canvas id="dataset-diabetes-age-chart" aria-label="Діабет за віком" role="img"></canvas>
            </div>
            <p class="analytics-card__note">Частка розрахована як відсоток учасників з діабетом у межах групи.</p>
          </section>

          <section class="glass-card analytics-card" id="card-obesity-age">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="pie-chart"></span>
              <span>Ожиріння за віковими групами</span>
            </h2>
            <p class="analytics-card__subtitle">Показує, як змінюється частка людей з ожирінням у різних вікових групах.</p>
            <div class="chart-wrapper">
              <canvas id="dataset-obesity-age-chart" aria-label="Ожиріння за віком" role="img"></canvas>
            </div>
            <p class="analytics-card__note">Ожиріння визначено як ІМТ ≥ 30 кг/м².</p>
          </section>

          <section class="glass-card analytics-card" id="card-correlations">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="git-merge"></span>
              <span>Кореляції факторів</span>
            </h2>
            <p class="analytics-card__subtitle">Наскільки тісно пов'язані основні показники між собою у вибірці.</p>
            <div class="chart-wrapper chart-wrapper--tall">
              <canvas id="dataset-correlation-chart" aria-label="Кореляції факторів" role="img"></canvas>
            </div>
            <p class="analytics-card__note">Значення від -1 до 1: чим ближче до 1, тим сильніший позитивний зв'язок між показниками.</p>
            <p class="analytics-card__empty" id="dataset-correlation-empty" hidden>Для цього графіка недостатньо даних про всі фактори. Переконайтеся, що у датасеті присутні всі ключові показники.</p>
          </section>

          <!-- Діаграми історії прогнозів користувача -->
          <section class="glass-card analytics-card" id="card-history-timeline">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="trending-up"></span>
              <span>Історія прогнозів</span>
            </h2>
            <p class="analytics-card__subtitle">Динаміка ймовірностей ризиків у часі для ваших прогнозів.</p>
            <div class="chart-wrapper chart-wrapper--tall">
              <canvas id="history-timeline-chart" aria-label="Історія прогнозів у часі" role="img"></canvas>
            </div>
            <p class="analytics-card__note">Лінії показують зміну ймовірності ризику для кожної цілі з часом.</p>
            <p class="analytics-card__empty" id="history-timeline-empty" hidden>Щоб побачити діаграми, спочатку виконайте хоча б один прогноз на сторінці «Форма прогнозування».</p>
          </section>

          <section class="glass-card analytics-card" id="card-history-risk-distribution">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="bar-chart-3"></span>
              <span>Розподіл по категоріях ризику</span>
            </h2>
            <p class="analytics-card__subtitle">Кількість ваших прогнозів по кожній категорії ризику для кожної цілі.</p>
            <div class="chart-wrapper">
              <canvas id="history-risk-distribution-chart" aria-label="Розподіл прогнозів по категоріях ризику" role="img"></canvas>
            </div>
            <p class="analytics-card__note">Показує, скільки прогнозів у кожній категорії ризику ви зробили.</p>
            <p class="analytics-card__empty" id="history-risk-distribution-empty" hidden>Щоб побачити діаграми, спочатку виконайте хоча б один прогноз на сторінці «Форма прогнозування».</p>
          </section>

          <section class="glass-card analytics-card" id="card-history-models">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="pie-chart"></span>
              <span>Використані моделі</span>
            </h2>
            <p class="analytics-card__subtitle">Частка прогнозів, виконаних з різними моделями машинного навчання.</p>
            <div class="chart-wrapper">
              <canvas id="history-models-chart" aria-label="Розподіл прогнозів по моделях" role="img"></canvas>
            </div>
            <p class="analytics-card__note">Діаграма показує, які моделі ви використовували найчастіше.</p>
            <p class="analytics-card__empty" id="history-models-empty" hidden>Щоб побачити діаграми, спочатку виконайте хоча б один прогноз на сторінці «Форма прогнозування».</p>
          </section>
        </div>
      </section>

      <section id="page-assistant" class="page" aria-labelledby="page-title" hidden>
        <div class="assistant-page">
          <section class="glass-card assistant-warning" id="assistant-warning" hidden>
            <div class="assistant-warning__row">
              <p class="assistant-warning__text">
                <span class="icon" data-lucide="alert-circle"></span>
                <span>Увага. Асистент не є лікарем і не замінює медичну консультацію. Він допомагає пояснювати результати оцінки ризиків та готуватися до розмови з лікарем.</span>
              </p>
              <button type="button" class="icon-button" id="assistant-warning-dismiss" aria-label="Закрити попередження" data-tooltip="Закрити попередження">
                <span class="icon" data-lucide="x"></span>
              </button>
            </div>
          </section>
          <div class="assistant-layout">
            <section class="glass-card assistant-chat">
              <div class="assistant-chat__header">
                <h2 class="glass-card__title">
                  <span class="icon" data-lucide="messages-square"></span>
                  <span>Чат з асистентом здоровʼя</span>
                </h2>
                <div class="assistant-chat__actions">
                  <button type="button" class="button button--ghost button--small button--icon-only" id="assistant-clear-btn" aria-label="Очистити чат" data-tooltip="Очистити чат" hidden>
                    <span class="icon" data-lucide="trash-2"></span>
                  </button>
                </div>
              </div>
              <div class="assistant-chat__messages" id="assistant-messages" aria-live="polite"></div>
              <div class="assistant-chat__composer">
                <div class="assistant-quick">
                  <button type="button" class="button button--ghost button--small assistant-quick__btn" data-template="Поясни мій ризик">Поясни мій ризик</button>
                  <button type="button" class="button button--ghost button--small assistant-quick__btn" data-template="Що це означає для мене?">Що це означає для мене</button>
                  <button type="button" class="button button--ghost button--small assistant-quick__btn" data-template="Які питання задати лікарю?">Які питання задати лікарю</button>
                </div>
                <div class="assistant-composer">
                  <input type="text" id="assistant-input" class="assistant-input" placeholder="Напишіть повідомлення..." />
                <button type="button" class="button assistant-send assistant-voice button--icon-only" id="assistant-voice-btn" aria-label="Голосовий ввід" data-tooltip="Голосовий ввід">
                  <span class="icon" data-lucide="mic"></span>
                </button>
                  <button type="button" class="button assistant-send button--icon-only" id="assistant-send-btn" aria-label="Надіслати">
                    <span class="icon" data-lucide="send"></span>
                  </button>
                </div>
              </div>
            </section>
            <section class="glass-card assistant-state" id="assistant-state-card">
              <h2 class="glass-card__title">
                <span class="icon" data-lucide="heart-pulse"></span>
                <span id="assistant-state-title-text">Мій поточний ризик</span>
              </h2>
              <div class="assistant-state__content" id="assistant-state-content">
                <div class="assistant-state__selector" id="assistant-state-selector" hidden>
                  <div class="risk-select" id="assistant-risk-select">
                    <button type="button" class="risk-select__button" id="assistant-risk-btn" aria-haspopup="listbox" aria-expanded="false" aria-controls="assistant-risk-menu">
                      <span class="risk-select__label" id="assistant-risk-btn-label">Обрати з історії</span>
                      <span class="icon" data-lucide="chevron-down"></span>
                    </button>
                    <div class="risk-select__menu" id="assistant-risk-menu" role="listbox" hidden></div>
                  </div>
                </div>
                <p class="assistant-state__empty" id="assistant-state-empty">Дані про ризик недоступні. Спочатку виконайте оцінку ризику у розділі «Форма прогнозування».</p>
                <div class="assistant-state__rows" id="assistant-state-rows" hidden>
                  <div class="assistant-state__row">
                    <span class="assistant-state__label">Ціль</span>
                    <span class="assistant-state__value" id="assistant-state-target">—</span>
                  </div>
                  <div class="assistant-state__row">
                    <span class="assistant-state__label">Ймовірність</span>
                    <span class="assistant-state__value" id="assistant-state-probability">—</span>
                  </div>
                  <div class="assistant-state__row">
                    <span class="assistant-state__label">Категорія ризику</span>
                    <span class="badge" id="assistant-state-badge">—</span>
                  </div>
                  <div class="assistant-state__row">
                    <span class="assistant-state__label">Ключові фактори</span>
                    <span class="assistant-state__value" id="assistant-state-factors">—</span>
                  </div>
                  <div class="assistant-state__row">
                    <span class="assistant-state__label">Час</span>
                    <span class="assistant-state__value" id="assistant-state-time">—</span>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </section>

      <section id="page-profile" class="page" aria-labelledby="page-title">
        <div class="profile-container">
          <!-- Guest state -->
          <div class="profile-guest-state" id="profile-guest-state">
            <section class="glass-card profile-card">
              <div class="profile-card__empty">
                <div class="profile-empty__icon">
                  <span class="icon" data-lucide="user"></span>
                </div>
                <h2>Профіль недоступний</h2>
                <p>Щоб переглянути профіль та зберігати прогнози, увійдіть або створіть обліковий запис.</p>
                <div class="profile-card__actions">
                  <button type="button" class="button button--ghost" id="profile-login-shortcut">Увійти</button>
                  <button type="button" class="button" id="profile-register-shortcut">Зареєструватися</button>
                </div>
              </div>
            </section>
          </div>

          <!-- Authenticated state -->
          <div class="profile-authenticated" id="profile-authenticated" hidden>
            <section class="glass-card profile-card">
              <!-- Profile Header -->
              <div class="profile-header">
                <div class="profile-avatar-large-wrapper">
                  <div class="profile-avatar-large" id="profile-avatar-large">A</div>
                  <div class="profile-avatar-overlay">
                    <input type="file" id="avatar-upload-input" accept="image/*" hidden />
                    <input type="color" id="avatar-color-input" class="avatar-color-input-hidden" />
                    <div class="profile-avatar-actions">
                      <button type="button" class="button button--ghost button--small button--icon-only" id="avatar-upload-btn" aria-label="Завантажити фото">
                        <span class="icon" data-lucide="upload"></span>
                      </button>
                      <button type="button" class="button button--ghost button--small button--icon-only" id="avatar-delete-btn" hidden aria-label="Видалити фото">
                        <span class="icon" data-lucide="trash-2"></span>
                      </button>
                      <button type="button" class="button button--ghost button--small button--icon-only" id="avatar-color-btn" hidden aria-label="Змінити колір аватару" data-tooltip="Змінити колір аватару">
                        <span class="icon" data-lucide="palette"></span>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="profile-header-info">
                  <h2 class="profile-header__name" id="profile-name">Ім'я користувача</h2>
                  <p class="profile-header__email" id="profile-email">user@example.com</p>
                  <p class="profile-header__joined" id="profile-joined">Зареєстрований</p>
                </div>
              </div>

              <!-- Tabs -->
              <div class="profile-tabs" role="tablist">
                <button type="button" class="profile-tab profile-tab--active" data-tab="profile" role="tab" aria-selected="true">
                  <span class="icon" data-lucide="user"></span>
                  <span>Профіль</span>
                </button>
                <button type="button" class="profile-tab" data-tab="password" role="tab" aria-selected="false">
                  <span class="icon" data-lucide="key"></span>
                  <span>Зміна пароля</span>
                </button>
                <button type="button" class="profile-tab" data-tab="delete-account" role="tab" aria-selected="false">
                  <span class="icon" data-lucide="trash-2"></span>
                  <span>Видалення акаунту</span>
                </button>
              </div>

              <!-- Tab Content -->
              <div class="profile-tab-content">
                <!-- Profile Tab (Overview + Edit) -->
                <div class="profile-tab-panel profile-tab-panel--active" id="profile-tab-profile" role="tabpanel">
                  <form id="profile-update-form" class="profile-form">
                    <div class="profile-form__grid">
                      <div class="profile-form__group">
                        <label for="profile-edit-first-name">Ім'я *</label>
                        <input type="text" id="profile-edit-first-name" name="first_name" placeholder="Ваше ім'я" required />
                      </div>
                      <div class="profile-form__group">
                        <label for="profile-edit-last-name">Прізвище</label>
                        <input type="text" id="profile-edit-last-name" name="last_name" placeholder="Ваше прізвище" />
                      </div>
                      <div class="profile-form__group">
                        <label for="profile-edit-date-of-birth">Дата народження</label>
                        <input type="date" id="profile-edit-date-of-birth" name="date_of_birth" />
                      </div>
                      <div class="profile-form__group">
                        <label for="profile-edit-gender">Стать</label>
                        <select id="profile-edit-gender" name="gender">
                          <option value="">Не вказано</option>
                          <option value="male">Чоловік</option>
                          <option value="female">Жінка</option>
                        </select>
                      </div>
                    </div>
                    <div class="profile-form__actions" id="profile-form-actions" hidden>
                      <button type="button" class="button button--ghost" id="profile-edit-cancel-btn">Скасувати</button>
                      <button type="submit" class="button" id="profile-edit-save-btn">Зберегти зміни</button>
                    </div>
                    <p class="profile-form__status" id="profile-update-status"></p>
                  </form>
                  <div class="profile-history-link" id="profile-history-link" hidden>
                    <button type="button" class="button button--ghost" id="profile-history-link-btn">
                      <span class="icon" data-lucide="history"></span>
                      <span>Переглянути всю історію прогнозів</span>
                    </button>
                  </div>
                </div>

                <!-- Password Change Tab -->
                <div class="profile-tab-panel" id="profile-tab-password" role="tabpanel">
                  <div class="profile-password-section">
                    <h3 class="profile-password-section__title">
                      <span class="icon" data-lucide="key"></span>
                      <span>Зміна пароля</span>
                    </h3>
                    <form id="profile-password-form" class="profile-form">
                      <input type="email" id="profile-password-email" name="email" autocomplete="username" class="visually-hidden" aria-hidden="true" />
                      <div class="profile-form__group">
                        <label for="profile-current-password">Поточний пароль</label>
                        <input type="password" id="profile-current-password" name="current_password" placeholder="Введіть поточний пароль" required autocomplete="current-password" />
                      </div>
                      <div class="profile-form__group">
                        <label for="profile-new-password">Новий пароль</label>
                        <input type="password" id="profile-new-password" name="new_password" placeholder="Введіть новий пароль" required autocomplete="new-password" />
                      </div>
                      <div class="profile-form__group">
                        <label for="profile-confirm-password">Підтвердження нового пароля</label>
                        <input type="password" id="profile-confirm-password" name="confirm_new_password" placeholder="Підтвердіть новий пароль" required autocomplete="new-password" />
                      </div>
                      <div class="profile-form__actions">
                        <button type="submit" class="button">Оновити пароль</button>
                      </div>
                      <p class="profile-form__status" id="profile-password-status"></p>
                    </form>
                  </div>
                </div>

                <!-- Delete Account Tab -->
                <div class="profile-tab-panel" id="profile-tab-delete-account" role="tabpanel">
                  <div class="profile-danger-zone">
                    <h3 class="profile-danger-zone__title">
                      <span class="icon" data-lucide="alert-triangle"></span>
                      <span>Видалення облікового запису</span>
                    </h3>
                    <div class="profile-danger-zone__content">
                      <p class="profile-danger-zone__warning">Видалення облікового запису є незворотним. Усі ваші дані будуть втрачені:</p>
                      <ul class="profile-danger-zone__list">
                        <li>Ваш профіль та особисті дані</li>
                        <li>Вся історія прогнозів</li>
                        <li>Завантажені фото та налаштування</li>
                        <li>Всі інші пов’язані дані</li>
                      </ul>
                      <p class="profile-danger-zone__note">Якщо ви впевнені, що хочете продовжити, натисніть кнопку нижче.</p>
                      <button type="button" class="button button--destructive" id="delete-account-btn">
                        <span class="icon" data-lucide="trash-2"></span>
                        <span>Видалити обліковий запис</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </section>

      <section id="page-history" class="page" aria-labelledby="page-title">
        <div class="history-page-content">
          <section class="glass-card history-card">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="history"></span>
              <span>Всі прогнози</span>
              <span class="count-badge" id="history-count" hidden></span>
              <span class="spacer"></span>
              <div class="history-actions">
                <button type="button" class="icon-button icon-button--ghost" id="history-view-toggle-btn" aria-label="Перемкнути вигляд" data-tooltip="Перемкнути вигляд">
                  <span class="icon" data-lucide="layout-grid"></span>
                </button>
                <button type="button" class="icon-button icon-button--ghost" id="history-bulk-mode-btn" aria-label="Груповий вибір" data-tooltip="Груповий вибір">
                  <span class="icon" data-lucide="check-square"></span>
                </button>
                <button type="button" class="icon-button icon-button--ghost icon-button--danger" id="history-bulk-delete-btn" aria-label="Видалити вибрані" data-tooltip="Видалити вибрані" hidden>
                  <span class="icon" data-lucide="trash-2"></span>
                </button>
                <button type="button" class="icon-button icon-button--ghost icon-button--danger" id="history-delete-all-btn" aria-label="Очистити все" data-tooltip="Очистити все">
                  <span class="icon" data-lucide="trash"></span>
                </button>
              </div>
            </h2>
            <div class="history-content" id="history-content">
              <p class="history-empty" id="history-empty">Історія поки порожня. Зробіть прогноз, щоб побачити його тут.</p>
              <div class="history-table-wrapper" id="history-table-wrapper" hidden>
                <table class="history-table" aria-describedby="page-history-title">
                  <thead>
                    <tr>
                      <th scope="col" style="width:36px;"></th>
                      <th scope="col">Дата</th>
                      <th scope="col">Ціль</th>
                      <th scope="col">Модель</th>
                      <th scope="col">Ймовірність</th>
                      <th scope="col">Категорія</th>
                      <th scope="col" class="history-table__actions">Дії</th>
                    </tr>
                  </thead>
                  <tbody id="history-table-body"></tbody>
                </table>
                <div class="history-grid" id="history-grid" hidden></div>
              </div>
            </div>
          </section>
        </div>
      </section>
      <!-- Модальне вікно підтвердження групового видалення історії -->
      <div id="bulk-delete-history-modal" class="modal" hidden role="dialog" aria-labelledby="bulk-delete-history-modal-title" aria-modal="true">
        <div class="modal__backdrop" id="bulk-delete-history-modal-backdrop"></div>
        <div class="modal__container">
          <div class="modal__content glass-card">
            <div class="modal__header">
              <h2 class="modal__title" id="bulk-delete-history-modal-title">
                <span class="icon" data-lucide="trash-2"></span>
                <span>Видалити вибрані прогнози?</span>
              </h2>
            </div>
            <div class="modal__body">
              <p class="modal__message" id="bulk-delete-history-message">Ви впевнені, що хочете видалити вибрані прогнози?</p>
            </div>
            <div class="modal__actions">
              <button type="button" class="button button--ghost" id="bulk-delete-history-cancel-btn">Скасувати</button>
              <button type="button" class="button button--destructive" id="bulk-delete-history-confirm-btn">
                <span class="icon" data-lucide="trash-2"></span>
                <span>Видалити</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <section id="page-api-status" class="page" aria-labelledby="page-title">
        <div class="api-status-page-content">
          <section class="glass-card api-status-card">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="activity"></span>
              <span>Поточний статус</span>
            </h2>
            <div class="api-status-page__status" id="api-status-page-status">
              <div class="api-status-page__status-indicator">
                <span class="status-dot" id="api-status-page-dot"></span>
                <span class="api-status-page__status-text" id="api-status-page-status-text">Перевірка...</span>
              </div>
              <button type="button" class="button button--ghost" id="api-status-refresh-btn">
                <span class="icon" data-lucide="refresh-cw"></span>
                <span>Перевірити знову</span>
              </button>
            </div>
          </section>

          <div class="api-status-page__grid">
            <section class="glass-card api-status-card">
              <h2 class="glass-card__title">
                <span class="icon" data-lucide="clock"></span>
                <span>Час відгуку</span>
              </h2>
              <div class="api-status-page__metrics" id="api-status-page-metrics">
                <div class="api-status-page__metric">
                  <span class="api-status-page__metric-label">Latency (Ping)</span>
                  <span class="api-status-page__metric-value" id="api-status-latency">—</span>
                </div>
                <div class="api-status-page__metric">
                  <span class="api-status-page__metric-label">HTTP статус</span>
                  <span class="api-status-page__metric-value" id="api-status-http-status">—</span>
                </div>
                <div class="api-status-page__metric">
                  <span class="api-status-page__metric-label">Остання перевірка</span>
                  <span class="api-status-page__metric-value" id="api-status-last-check">—</span>
                </div>
              </div>
            </section>

            <section class="glass-card api-status-card">
              <h2 class="glass-card__title">
                <span class="icon" data-lucide="info"></span>
                <span>Інформація про API</span>
              </h2>
              <div class="api-status-page__info" id="api-status-page-info">
                <div class="api-status-page__info-item">
                  <span class="api-status-page__info-label">Версія</span>
                  <span class="api-status-page__info-value" id="api-status-version">—</span>
                </div>
                <div class="api-status-page__info-item">
                  <span class="api-status-page__info-label">Загальна кількість маршрутів</span>
                  <span class="api-status-page__info-value" id="api-status-total-routes">—</span>
                </div>
                <div class="api-status-page__info-item">
                  <span class="api-status-page__info-label">Основних ендпоінтів</span>
                  <span class="api-status-page__info-value" id="api-status-main-endpoints">—</span>
                </div>
              </div>
            </section>
          </div>

          <section class="glass-card api-status-card">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="list"></span>
              <span>Основні маршрути</span>
            </h2>
            <div class="api-status-page__routes" id="api-status-page-routes">
              <p class="api-status-page__empty">Завантаження...</p>
            </div>
          </section>

          <section class="glass-card api-status-card">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="cpu"></span>
              <span>Технічні характеристики</span>
            </h2>
            <div class="api-status-page__tech-specs">
              <div class="api-status-page__tech-spec-item">
                <span class="api-status-page__tech-spec-label">Платформа</span>
                <span class="api-status-page__tech-spec-value">FastAPI</span>
              </div>
              <div class="api-status-page__tech-spec-item">
                <span class="api-status-page__tech-spec-label">База даних</span>
                <span class="api-status-page__tech-spec-value">SQLite</span>
              </div>
              <div class="api-status-page__tech-spec-item">
                <span class="api-status-page__tech-spec-label">Збереження користувачів</span>
                <span class="api-status-page__tech-spec-value">SQLModel</span>
              </div>
              <div class="api-status-page__tech-spec-item">
                <span class="api-status-page__tech-spec-label">Моделі ШІ</span>
                <span class="api-status-page__tech-spec-value">LogReg, RandomForest, XGB, MLP</span>
              </div>
              <div class="api-status-page__tech-spec-item">
                <span class="api-status-page__tech-spec-label">Формат відповіді API</span>
                <span class="api-status-page__tech-spec-value">JSON</span>
              </div>
            </div>
          </section>
        </div>
      </section>

      <section id="page-report" class="page" aria-labelledby="page-title" hidden>
        <div class="page__grid">
          <section class="glass-card">
            <h2 class="glass-card__title">
              <span class="icon" data-lucide="file-text"></span>
              <span>Генерація звіту</span>
            </h2>
            <div id="report-content">
              <div id="report-empty" class="report-empty">
                <div class="report-empty__icon">
                  <span class="icon" data-lucide="file-x"></span>
                </div>
                <h3>Немає даних для звіту 📭</h3>
                <p>Для генерації звіту спочатку виконайте прогнозування ризиків у формі. ✨</p>
                <button type="button" class="button button--primary" onclick="navigateTo('/app')">
                  <span class="icon" data-lucide="arrow-left"></span>
                  <span>Перейти до форми</span>
                </button>
              </div>
              <div id="report-selector" class="report-selector" hidden>
                <div class="report-selector__section">
                  <h3 class="report-selector__section-title">Оберіть формат звіту 📊</h3>
                  <div class="report-format-grid" id="report-format-grid">
                    <button type="button" class="report-format-card" data-format="pdf">
                      <div class="report-format-card__icon report-format-card__icon--pdf">
                        <span class="icon" data-lucide="file-text"></span>
                      </div>
                      <div class="report-format-card__content">
                        <h4 class="report-format-card__title">PDF 📄</h4>
                        <p class="report-format-card__description">Портативний формат документів</p>
                      </div>
                    </button>
                    <button type="button" class="report-format-card" data-format="excel">
                      <div class="report-format-card__icon report-format-card__icon--excel">
                        <span class="icon" data-lucide="file-spreadsheet"></span>
                      </div>
                      <div class="report-format-card__content">
                        <h4 class="report-format-card__title">Excel 📊</h4>
                        <p class="report-format-card__description">Табличний формат для аналізу</p>
                      </div>
                    </button>
                    <button type="button" class="report-format-card" data-format="csv">
                      <div class="report-format-card__icon report-format-card__icon--csv">
                        <span class="icon" data-lucide="file-code"></span>
                      </div>
                      <div class="report-format-card__content">
                        <h4 class="report-format-card__title">CSV 📋</h4>
                        <p class="report-format-card__description">Текстовий формат даних</p>
                      </div>
                    </button>
                    <button type="button" class="report-format-card" data-format="json">
                      <div class="report-format-card__icon report-format-card__icon--json">
                        <span class="icon" data-lucide="braces"></span>
                      </div>
                      <div class="report-format-card__content">
                        <h4 class="report-format-card__title">JSON 💾</h4>
                        <p class="report-format-card__description">Структурований формат даних</p>
                      </div>
                    </button>
                  </div>
                </div>
                <div class="report-selector__section">
                  <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                    <h3 class="report-selector__section-title" style="margin: 0;">Оберіть прогнозування 📈</h3>
                    <button type="button" class="icon-button icon-button--ghost" id="report-view-toggle-btn" aria-label="Перемкнути вигляд" data-tooltip="Перемкнути вигляд">
                      <span class="icon" data-lucide="layout-grid"></span>
                    </button>
                  </div>
                  <div class="report-selector__predictions" id="report-predictions-list"></div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </section>

      <section id="page-login" class="page auth-page" aria-labelledby="page-title">
        <div class="auth-card">
          <p class="auth-card__subtitle">Уведіть електронну пошту та пароль, щоб продовжити.</p>
          <form id="login-form" class="auth-form" novalidate>
            <div class="auth-form__field">
              <label for="login-email">Електронна пошта</label>
              <input type="email" id="login-email" name="email" autocomplete="username" placeholder="name@example.com" required />
            </div>
            <div class="auth-form__field">
              <label for="login-password">Пароль</label>
              <input type="password" id="login-password" name="password" autocomplete="current-password" placeholder="Ваш пароль" required />
            </div>
            <p class="auth-form__error" id="login-error" hidden></p>
            <p class="auth-form__success" id="login-success" hidden></p>
            <button type="submit" class="button auth-form__submit">Увійти</button>
            <p class="auth-form__footer">
              <button type="button" class="auth-form__link" id="to-forgot-password">Забули пароль?</button>
            </p>
            <p class="auth-form__footer">Ще не маєте облікового запису? <button type="button" class="auth-form__link" id="to-register">Зареєструватися</button></p>
          </form>
        </div>
      </section>

      <section id="page-forgot-password" class="page auth-page" aria-labelledby="page-title">
        <div class="auth-card">
          <p class="auth-card__subtitle">Введіть вашу електронну пошту, і ми надішлемо інструкції для відновлення пароля.</p>
          <form id="forgot-password-form" class="auth-form" novalidate>
            <div class="auth-form__field">
              <label for="forgot-email">Електронна пошта</label>
              <input type="email" id="forgot-email" name="email" autocomplete="username" placeholder="name@example.com" required />
            </div>
            <p class="auth-form__error" id="forgot-password-error" hidden></p>
            <p class="auth-form__success" id="forgot-password-success" hidden></p>
            <button type="submit" class="button auth-form__submit">Надіслати інструкції</button>
            <p class="auth-form__footer">
              <button type="button" class="auth-form__link" id="forgot-to-login">Повернутися до входу</button>
            </p>
          </form>
        </div>
      </section>

      <section id="page-reset-password" class="page auth-page" aria-labelledby="page-title">
        <div class="auth-card">
          <p class="auth-card__subtitle">Введіть новий пароль для вашого облікового запису.</p>
          <form id="reset-password-form" class="auth-form" novalidate>
            <input type="email" id="reset-password-email" name="email" autocomplete="username" class="visually-hidden" aria-hidden="true" />
            <div class="auth-form__field">
              <label for="reset-new-password">Новий пароль</label>
              <input type="password" id="reset-new-password" name="new_password" autocomplete="new-password" placeholder="Мінімум 8 символів" minlength="8" required />
            </div>
            <div class="auth-form__field">
              <label for="reset-confirm-password">Підтвердження нового пароля</label>
              <input type="password" id="reset-confirm-password" name="confirm_new_password" autocomplete="new-password" placeholder="Повторіть новий пароль" minlength="8" required />
            </div>
            <p class="auth-form__error" id="reset-password-error" hidden></p>
            <button type="submit" class="button auth-form__submit">Оновити пароль</button>
          </form>
        </div>
      </section>

      <section id="page-register" class="page auth-page" aria-labelledby="page-title">
        <div class="auth-card">
          <p class="auth-card__subtitle">Заповніть форму, щоб почати зберігати свою історію прогнозів.</p>
          <form id="register-form" class="auth-form" novalidate>
            <div class="auth-form__field">
              <label for="register-first-name">Ім'я *</label>
              <input type="text" id="register-first-name" name="first_name" placeholder="Ваше ім'я" minlength="1" required />
            </div>
            <div class="auth-form__field">
              <label for="register-last-name">Прізвище *</label>
              <input type="text" id="register-last-name" name="last_name" placeholder="Ваше прізвище" minlength="1" required />
            </div>
            <div class="auth-form__field">
              <label for="register-date-of-birth">Дата народження *</label>
              <input type="date" id="register-date-of-birth" name="date_of_birth" required />
            </div>
            <div class="auth-form__field">
              <label for="register-gender">Стать *</label>
              <select id="register-gender" name="gender" required>
                <option value="">Оберіть стать</option>
                <option value="male">Чоловік</option>
                <option value="female">Жінка</option>
              </select>
            </div>
            <div class="auth-form__field">
              <label for="register-email">Електронна пошта *</label>
              <input type="email" id="register-email" name="email" autocomplete="username" placeholder="name@example.com" required />
            </div>
            <div class="auth-form__field">
              <label for="register-password">Пароль *</label>
              <input type="password" id="register-password" name="password" autocomplete="new-password" placeholder="Мінімум 8 символів" minlength="8" required />
            </div>
            <div class="auth-form__field">
              <label for="register-confirm">Підтвердження пароля *</label>
              <input type="password" id="register-confirm" name="confirm_password" autocomplete="new-password" placeholder="Повторіть пароль" minlength="8" required />
            </div>
            <p class="auth-form__error" id="register-error" hidden></p>
            <button type="submit" class="button auth-form__submit">Зареєструватися</button>
            <p class="auth-form__footer">Вже маєте обліковий запис? <button type="button" class="auth-form__link" id="to-login">Увійти</button></p>
          </form>
        </div>
      </section>

      <section id="page-chats" class="page" aria-labelledby="page-title" hidden>
        <div class="chats-page">
          <!-- Стан 1: Список активних чатів на всю ширину -->
          <div class="chats-list-full" id="chats-list-full">
            <div class="chats-list-full__header">
              <h2 class="chats-list-full__title">Список чатів</h2>
              <div class="chats-list-full__header-actions">
                <button type="button" class="button button--ghost button--small button--icon-only" id="chats-edit-mode-btn" aria-label="Редагувати порядок" data-tooltip="Редагувати порядок">
                  <span class="icon" data-lucide="grip-vertical"></span>
                </button>
                <button type="button" class="button button--ghost button--small button--icon-only" id="chats-new-chat-btn" aria-label="Новий чат" data-tooltip="Новий чат">
                  <span class="icon" data-lucide="plus"></span>
                </button>
              </div>
            </div>
            <div class="chats-list-full__content">
              <div class="chats-list" id="chats-list">
                <p class="chats-empty" id="chats-empty">Немає чатів. Створіть новий чат, щоб почати спілкування.</p>
              </div>
            </div>
          </div>

          <!-- Стан 2: Список користувачів на всю ширину -->
          <div class="chats-users-full" id="chats-users-full" hidden>
            <div class="chats-users-full__header">
              <button type="button" class="button button--ghost button--small" id="chats-back-to-list-btn" aria-label="Назад">
                <span class="icon" data-lucide="arrow-left"></span>
                <span>Назад</span>
              </button>
              <h2 class="chats-users-full__title">Виберіть користувача</h2>
            </div>
            <div class="chats-users-full__content">
              <div class="chats-users-list" id="chats-users-list">
                <p class="chats-empty" id="chats-users-empty">Завантаження користувачів...</p>
              </div>
            </div>
          </div>

          <!-- Стан 3: Чат з sidebar -->
          <div class="chats-layout" id="chats-layout" hidden>
            <!-- Область чату -->
            <main class="chats-main">
              <div class="chats-main__empty" id="chats-main-empty">
                <div class="chats-main__empty-icon">
                  <span class="icon" data-lucide="message-circle"></span>
                </div>
                <h3>Оберіть чат</h3>
                <p>Виберіть існуючий чат або створіть новий, щоб почати спілкування.</p>
              </div>
              <div class="chats-main__content" id="chats-main-content" hidden>
                <div class="chats-main__header">
                  <button type="button" class="button button--ghost button--small btn-back-chats" id="chats-back-to-list-from-chat-btn" aria-label="Назад до списку">
                    <span class="icon" data-lucide="arrow-left"></span>
                    <span>Назад</span>
                  </button>
                  <div class="chats-main__header-info">
                    <div class="chats-main__avatar" id="chats-main-avatar">?</div>
                    <div>
                      <h3 class="chats-main__header-name" id="chats-main-name">Користувач</h3>
                      <p class="chats-main__header-status" id="chats-main-status">Онлайн</p>
                    </div>
                  </div>
                  <div class="chats-main__header-actions">
                    <button type="button" class="button button--ghost button--small button--icon-only btn-block-user" id="chats-main-block-btn" aria-label="Заблокувати користувача" hidden>
                      <span class="icon" data-lucide="user-x"></span>
                    </button>
                  </div>
                </div>
                <div class="chats-main__messages" id="chats-main-messages"></div>
                <div class="chats-main__composer">
                  <input type="text" id="chats-main-input" class="chats-main__input" placeholder="Напишіть повідомлення..." />
                  <button type="button" class="button chats-main__send button--icon-only" id="chats-main-send-btn" aria-label="Надіслати">
                    <span class="icon" data-lucide="send"></span>
                  </button>
                </div>
              </div>
            </main>
          </div>
        </div>
      </section>
    </main>
    </div>
  </div>

  <!-- Лоадер -->
  <div id="app-loader" class="app-loader" hidden aria-live="polite" aria-label="Завантаження">
    <div class="app-loader__backdrop"></div>
    <div class="app-loader__content">
      <div class="app-loader__spinner">
        <div class="app-loader__circle"></div>
        <div class="app-loader__circle"></div>
        <div class="app-loader__circle"></div>
      </div>
      <p class="app-loader__text">Перенаправлення...</p>
    </div>
  </div>

  <!-- Контейнер для сповіщень (notifications/toasts) -->
  <div id="notifications-container" class="notifications-container" aria-live="polite" aria-label="Сповіщення"></div>

  <!-- Модальне вікно підтвердження видалення прогнозу з історії -->
  <div id="delete-history-modal" class="modal" hidden role="dialog" aria-labelledby="delete-history-modal-title" aria-modal="true">
    <div class="modal__backdrop" id="delete-history-modal-backdrop"></div>
    <div class="modal__container">
      <div class="modal__content glass-card">
        <div class="modal__header">
          <h2 class="modal__title" id="delete-history-modal-title">
            <span class="icon" data-lucide="trash-2"></span>
            <span>Видалити прогноз з історії?</span>
          </h2>
        </div>
        <div class="modal__body">
          <p class="modal__message">
            Ви впевнені, що хочете видалити цей прогноз з історії? Ця дія є незворотною, але ви завжди зможете зробити новий прогноз.
          </p>
        </div>
        <div class="modal__actions">
          <button type="button" class="button button--ghost" id="delete-history-cancel-btn">Скасувати</button>
          <button type="button" class="button button--destructive" id="delete-history-confirm-btn">
            <span class="icon" data-lucide="trash-2"></span>
            <span>Видалити</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Модальне вікно підтвердження видалення аватара -->
  <div id="delete-avatar-modal" class="modal" hidden role="dialog" aria-labelledby="delete-avatar-modal-title" aria-modal="true">
    <div class="modal__backdrop" id="delete-avatar-modal-backdrop"></div>
    <div class="modal__container">
      <div class="modal__content glass-card">
        <div class="modal__header">
          <h2 class="modal__title" id="delete-avatar-modal-title">
            <span class="icon" data-lucide="trash-2"></span>
            <span>Видалити фото профілю?</span>
          </h2>
        </div>
        <div class="modal__body">
          <p class="modal__message">
            Ви впевнені, що хочете видалити поточне фото профілю? Після видалення буде повернено стандартний аватар з вашим ініціалом.
          </p>
          <p class="modal__message modal__message--warning">Цю дію можна скасувати, завантаживши нове фото.</p>
        </div>
        <div class="modal__actions">
          <button type="button" class="button button--ghost" id="delete-avatar-cancel-btn">Скасувати</button>
          <button type="button" class="button button--destructive" id="delete-avatar-confirm-btn">
            <span class="icon" data-lucide="trash-2"></span>
            <span>Видалити</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Модальне вікно підтвердження видалення облікового запису -->
  <div id="delete-account-modal" class="modal" hidden role="dialog" aria-labelledby="delete-account-modal-title" aria-modal="true">
    <div class="modal__backdrop" id="delete-account-modal-backdrop"></div>
    <div class="modal__container">
      <div class="modal__content glass-card">
        <div class="modal__header">
          <h2 class="modal__title" id="delete-account-modal-title">
            <span class="icon" data-lucide="alert-triangle"></span>
            <span>Ви впевнені, що хочете видалити обліковий запис?</span>
          </h2>
        </div>
        <div class="modal__body">
          <p class="modal__message">
            Ця дія є незворотною. Після видалення вашого облікового запису:
          </p>
          <ul class="modal__list">
            <li>Всі ваші особисті дані будуть видалені</li>
            <li>Вся історія прогнозів буде втрачена</li>
            <li>Відновити обліковий запис буде неможливо</li>
          </ul>
          <p class="modal__message modal__message--warning">Ви впевнені, що хочете продовжити?</p>
          <p class="modal__error" id="delete-account-error" hidden role="alert"></p>
        </div>
        <div class="modal__actions">
          <button type="button" class="button button--ghost" id="delete-account-cancel-btn">Скасувати</button>
          <button type="button" class="button button--destructive" id="delete-account-confirm-btn">
            <span class="icon" data-lucide="trash-2"></span>
            <span>Так, видалити</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Універсальний контейнер для динамічних модалок (confirm, alert) -->
  <div id="custom-modal-container"></div>

  <script src="/app/static/app.js" defer></script>
</body>
</html>
